<feed xmlns="http://www.w3.org/2005/Atom"> <id>/</id><title>one step at a time</title><subtitle>A minimal, responsive and feature-rich Jekyll theme for technical writing.</subtitle> <updated>2025-01-23T23:19:21+08:00</updated> <author> <name>fuqiang wang</name> <uri>/</uri> </author><link rel="self" type="application/atom+xml" href="/feed.xml"/><link rel="alternate" type="text/html" hreflang="en" href="/"/> <generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator> <rights> © 2025 fuqiang wang </rights> <icon>/assets/img/favicons/favicon.ico</icon> <logo>/assets/img/favicons/favicon-96x96.png</logo> <entry><title>host-bridge is pci device BUT NOT pci bridge</title><link href="/posts/host-bridge/" rel="alternate" type="text/html" title="host-bridge is pci device BUT NOT pci bridge" /><published>2025-01-23T21:37:00+08:00</published> <updated>2025-01-23T21:37:00+08:00</updated> <id>/posts/host-bridge/</id> <content src="/posts/host-bridge/" /> <author> <name>fuqiang</name> </author> <category term="pcie" /> <category term="host_bridge" /> <summary>查看host-bridge配置空间 [root@A06-R08-I134-73-919XB72 openEuler-2403]# lspci -xxx -s 00:00.0 00: [86 80] [00 2f] [40 05] [10 00] 02 [00 00 06] 00 00 [00] 00 [vendor] [device] [command] [status][revision id] [class_code] | | ...</summary> </entry> <entry><title>emulate wbinvd</title><link href="/posts/wbinvd-emulate/" rel="alternate" type="text/html" title="emulate wbinvd" /><published>2025-01-22T13:05:00+08:00</published> <updated>2025-01-22T13:05:00+08:00</updated> <id>/posts/wbinvd-emulate/</id> <content src="/posts/wbinvd-emulate/" /> <author> <name>fuqiang</name> </author> <category term="kvm" /> <category term="wbinvd" /> <summary>related patch KVM: VMX: wbinvd exiting commit e5edaa01c4cea5f60c617fac989c6458df0ecc4e Eddie Dong Sun Nov 11 12:28:35 2007 +0200 KVM: VMX: Execute WBINVD to keep data consistency with assigned devices commit f5f48ee15c2ee3e44cf429e34b16c6fa9b900246 Sheng Yang Wed Jun ...</summary> </entry> <entry><title>qemu brige migration</title><link href="/posts/pci_bridge/" rel="alternate" type="text/html" title="qemu brige migration" /><published>2025-01-21T23:02:00+08:00</published> <updated>2025-01-21T23:02:00+08:00</updated> <id>/posts/pci_bridge/</id> <content src="/posts/pci_bridge/" /> <author> <name>fuqiang</name> </author> <category term="qemu" /> <category term="pci_bridge" /> <summary>PCI bridge dev vmstate static const VMStateDescription pci_bridge_dev_vmstate = { .name = &amp;quot;pci_bridge&amp;quot;, .priority = MIG_PRI_PCI_BUS, .fields = (VMStateField[]) { VMSTATE_PCI_DEVICE(parent_obj, PCIBridge), SHPC_VMSTATE(shpc, PCIDevice, pci_device_shpc_present), VMSTATE_END_OF_LIST() } }; 而pci_bridge type为: static const TypeInfo pci_bridge_type_info = {...</summary> </entry> <entry><title>time</title><link href="/posts/time/" rel="alternate" type="text/html" title="time" /><published>2024-12-20T22:19:00+08:00</published> <updated>2024-12-20T22:19:00+08:00</updated> <id>/posts/time/</id> <content src="/posts/time/" /> <author> <name>fuqiang</name> </author> <category term="time" /> <summary>参考链接 We Are Not Getting Any Younger: A New Approach to Time and Timers</summary> </entry> <entry><title>apic timer</title><link href="/posts/setup-apic-timer/" rel="alternate" type="text/html" title="apic timer" /><published>2024-12-20T10:10:00+08:00</published> <updated>2024-12-20T10:10:00+08:00</updated> <id>/posts/setup-apic-timer/</id> <content src="/posts/setup-apic-timer/" /> <author> <name>fuqiang</name> </author> <category term="timer" /> <category term="apic-timer" /> <summary>setup timer boot cpu start_kernel =&amp;amp;gt; time_init(); =&amp;amp;gt; choose early clocksource in [hpet, pm, pit] to calibrate_tsc ## 以hpet计算tsc 为例 ## 这里主要是因为hpet/pit/pm频率是确定的，但是tsc ## 频率不确定, 需要用其他的clocksource来计算下 =&amp;amp;gt; cpu_khz = hpet_calibrate_tsc(); =&amp;amp;gt; ((tsc_delta) * 1000000000L) / hpet_delta * =&amp;amp;gt; enable early timer =&amp;amp;gt; setup_irq(0, &amp;amp;amp;irq0...</summary> </entry> </feed>
