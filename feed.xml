<feed xmlns="http://www.w3.org/2005/Atom"> <id>/</id><title>one step at a time</title><subtitle>A minimal, responsive and feature-rich Jekyll theme for technical writing.</subtitle> <updated>2024-04-17T14:41:33+08:00</updated> <author> <name>fuqiang wang</name> <uri>/</uri> </author><link rel="self" type="application/atom+xml" href="/feed.xml"/><link rel="alternate" type="text/html" hreflang="en" href="/"/> <generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator> <rights> © 2024 fuqiang wang </rights> <icon>/assets/img/favicons/favicon.ico</icon> <logo>/assets/img/favicons/favicon-96x96.png</logo> <entry><title>async pf -- GUP change</title><link href="/posts/async-pf-gup-change/" rel="alternate" type="text/html" title="async pf -- GUP change" /><published>2024-04-16T15:00:00+08:00</published> <updated>2024-04-16T15:00:00+08:00</updated> <id>/posts/async-pf-gup-change/</id> <content src="/posts/async-pf-gup-change/" /> <author> <name>fuqiang</name> </author> <category term="kvm" /> <category term="async_pf" /> <summary>参考代码 该部分代码, mail list中和commit中内容不同, 而且mail list中也没有提到为什么当时没有全部 合入, 我们先以mail list 为准: [KVM: Add host swap event notifications for PV guest][v7] 后续, 我们在另一篇文章中详细介绍: [link][2] 遗留问题 get_user_pages_noio 该部分代码来自于: [Add get_user_pages() variant that fails if major fault is required.][3] 社区并没有合入该patch 该patch 引入了 get_user_page()的noio 版的变体, 他只在不需要 major fault的情况下才会 成功的 get pag...</summary> </entry> <entry><title>async pf -- gfn2hva cache</title><link href="/posts/async-pf-gfn2hva-cache/" rel="alternate" type="text/html" title="async pf -- gfn2hva cache" /><published>2024-04-16T15:00:00+08:00</published> <updated>2024-04-16T15:00:00+08:00</updated> <id>/posts/async-pf-gfn2hva-cache/</id> <content src="/posts/async-pf-gfn2hva-cache/" /> <author> <name>fuqiang</name> </author> <category term="kvm" /> <category term="async_pf" /> <summary>introduce 该功能仅通过name就可以得知, 是为了缓存gfn(gpa)到hva的映射. 但是这个映射关系 不是一直存在么, 为什么设计看似比较复杂的机制, 我们一步步来看 user memory region support 我们知道,在比较早期的版本, kvm 创建memslot API kvm_vm_ioctl KVM_SET_USER_MEMORY_REGION 就已经支持了对 user memory region申请的支持. 涉及patch Patch: KVM: Support assigning userspace memory to the guest mail list: mail 这里只展示下, 用户态入参的数据结构: +/* for KVM_SET_USER_MEMORY_REGION */ +struct ...</summary> </entry> <entry><title>embedding markdown in HTML tag</title><link href="/posts/embedding_markdown_in_html_tag/" rel="alternate" type="text/html" title="embedding markdown in HTML tag" /><published>2024-04-12T10:53:00+08:00</published> <updated>2024-04-12T10:53:00+08:00</updated> <id>/posts/embedding_markdown_in_html_tag/</id> <content src="/posts/embedding_markdown_in_html_tag/" /> <author> <name>fuqiang</name> </author> <category term="markdown" /> <summary>ISSUE When I try to use the markdown syntax in &amp;amp;lt;details&amp;amp;gt; HTML tags, for example, code blocks, encounter the problem of code blocks that cannot be rendered. The source code is as follows: &amp;amp;lt;details&amp;amp;gt; &amp;amp;lt;summary&amp;amp;gt; aaa &amp;amp;lt;/summary&amp;amp;gt; ` ` `cpp int a = 1; ` ` ` &amp;amp;lt;/details&amp;amp;gt; ` char seems unable to be translated in code block, so I added space characters between them It ...</summary> </entry> <entry><title>async pf</title><link href="/posts/async-pf/" rel="alternate" type="text/html" title="async pf" /><published>2024-04-10T12:20:00+08:00</published> <updated>2024-04-10T12:20:00+08:00</updated> <id>/posts/async-pf/</id> <content src="/posts/async-pf/" /> <author> <name>fuqiang</name> </author> <category term="kvm" /> <category term="async_pf" /> <summary>introduce 在支持EPT的架构中, 对于GVA-&amp;amp;gt;HPA一般有两段映射: GVA-&amp;amp;gt;GPA GPA-&amp;amp;gt;HPA 而host kernel (kvm) 需要关心的是 GPA-&amp;amp;gt;HPA的映射, 需要host做的事情主要有 以下几个: 捕捉相关 VM-exit event (EPT violation), 得到 GPA 分配page 建立映射关系(当然这个映射关系, 不止是GPA-&amp;amp;gt;HPA的mmu pgtable, 还有 HVA – GPA, 在这里不展开, 总之分配好具体的page(分配HPA), 以及为其建立好 mmu pgtable, 就可以完成该事件的处理) 如下图: 图示 graphviz-ae4ca25f7bf30b9e61f0f3b83bc12338 digraph G { su...</summary> </entry> </feed>
