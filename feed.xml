<feed xmlns="http://www.w3.org/2005/Atom"> <id>/</id><title>one step at a time</title><subtitle>A minimal, responsive and feature-rich Jekyll theme for technical writing.</subtitle> <updated>2024-11-12T23:49:01+08:00</updated> <author> <name>fuqiang wang</name> <uri>/</uri> </author><link rel="self" type="application/atom+xml" href="/feed.xml"/><link rel="alternate" type="text/html" hreflang="en" href="/"/> <generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator> <rights> © 2024 fuqiang wang </rights> <icon>/assets/img/favicons/favicon.ico</icon> <logo>/assets/img/favicons/favicon-96x96.png</logo> <entry><title>auto-converge</title><link href="/posts/auto-converge/" rel="alternate" type="text/html" title="auto-converge" /><published>2024-11-12T23:20:00+08:00</published> <updated>2024-11-12T23:20:00+08:00</updated> <id>/posts/auto-converge/</id> <content src="/posts/auto-converge/" /> <author> <name>fuqiang</name> </author> <category term="live_migration" /> <category term="autoconverge" /> <summary>简介 在大型机器，并且系统负载高时热迁移，工作负载往往比热迁移速度更快，从而导致 live migration无法 converge. 这个往往受限于bandwidth, 虽然现在网卡的带宽越来越高。但是虚拟机的核心数量 以及cpu主频，内存带宽也在逐渐增大。 Chegu Vinod 在 2013 年提出了 auto-converge, （但是的场景即使使用了10Gig NICs也仍然NOT converge). 所以，他提出了该方案，来限制脏页产生速度，也就是 简单粗暴的限制vcpu的”频率”, (让vcpu线程sleep). 我们来看下该patch 的 commit message: Busy enterprise workloads hosted on large sized VM&amp;#39;s tend to dirty memory faster than the trans...</summary> </entry> <entry><title>[Translate]: Migration auto-converge problem</title><link href="/posts/Migration-auto-converge-problem/" rel="alternate" type="text/html" title="[Translate]: Migration auto-converge problem" /><published>2024-11-12T23:20:00+08:00</published> <updated>2024-11-12T23:20:00+08:00</updated> <id>/posts/Migration-auto-converge-problem/</id> <content src="/posts/Migration-auto-converge-problem/" /> <author> <name>fuqiang</name> </author> <category term="live_migration" /> <category term="auto-converge" /> <summary>From: &amp;quot;Jason J. Herne&amp;quot; &amp;amp;lt;jjherne@linux.vnet.ibm.com&amp;amp;gt; To: &amp;quot;qemu-devel@nongnu.org qemu-devel&amp;quot; &amp;amp;lt;qemu-devel@nongnu.org&amp;amp;gt;, Christian Borntraeger &amp;amp;lt;borntraeger@de.ibm.com&amp;amp;gt; Subject: [Qemu-devel] Migration auto-converge problem Date: Mon, 02 Mar 2015 16:04:54 -0500 We have a test case that dirties memory very very quickly. When we run this test case in a guest and attempt a migration,...</summary> </entry> <entry><title>Mem</title><link href="/posts/mem/" rel="alternate" type="text/html" title="Mem" /><published>2024-10-16T00:00:00+08:00</published> <updated>2024-10-16T00:00:00+08:00</updated> <id>/posts/mem/</id> <content src="/posts/mem/" /> <author> <name>fuqiang wang</name> </author> <summary>struct 内存初始化流程 初始化MemoryRegion main =&amp;amp;gt; qemu_init =&amp;amp;gt; qemu_create_machine =&amp;amp;gt; qmp_x_exit_preconfig =&amp;amp;gt; qemu_init_board =&amp;amp;gt; machine_run_board_init =&amp;amp;gt; create_default_memdev(current_machine, mem_path, errp) =&amp;amp;gt; user_creatable_complete =&amp;amp;gt; host_memory_backend_memory_complete =&amp;amp;gt; ram_back...</summary> </entry> <entry><title>qemu hot_upgrade org patch</title><link href="/posts/qemu-hot-upgrade-upstream-org/" rel="alternate" type="text/html" title="qemu hot_upgrade org patch" /><published>2024-10-11T19:27:00+08:00</published> <updated>2024-10-11T19:27:00+08:00</updated> <id>/posts/qemu-hot-upgrade-upstream-org/</id> <content src="/posts/qemu-hot-upgrade-upstream-org/" /> <author> <name>fuqiang</name> </author> <category term="qemu" /> <category term="hot_upgrade" /> <summary>patch link https://patchew.org/QEMU/1658851843-236870-1-git-send-email-steven.sistare@oracle.com/ commit message This version of the live update patch series integrates live update into the live migration framework. The new interfaces are: integrates: 集成，融合 mode (migration parameter) cpr-exec-args (migration parameter) file (migration URI) migrate-mode-enable (command-l...</summary> </entry> <entry><title>qemu hot update my test</title><link href="/posts/hot-upgrade-my-test/" rel="alternate" type="text/html" title="qemu hot update my test" /><published>2024-10-11T19:27:00+08:00</published> <updated>2024-10-11T19:27:00+08:00</updated> <id>/posts/hot-upgrade-my-test/</id> <content src="/posts/hot-upgrade-my-test/" /> <author> <name>fuqiang</name> </author> <category term="qemu" /> <category term="hot_upgrade" /> <summary>cpr-reboot test (upstream已经合入, 直接用上游测试) 测试过程如下: 测试过程 # org process ./qemu-system-x86_64 -machine type=q35 -object memory-backend-memfd,size=2G,id=ram0 -m 2G -monitor stdio ~/qemu-hotupdate&amp;amp;gt; sh run.sh QEMU 8.2.50 monitor - type &amp;#39;help&amp;#39; for more information (qemu) info status VM status: running (qemu) migrate_set_parameter mode cpr-reboot (qemu) migrate_set_capability x-ignore-shared on...</summary> </entry> </feed>
